---
title: js事件循环机制 ？
date: 2019-11-23 21:47:39
tags:
  - JavaScript
  - 前端
  - HTML规范
---

MDN上对事件循环这一块也是说的比较模糊，随便百度一下，什么CSDN啊、简书啊、脚本之家啊、segmentfault啊、阮一峰啊乱七八糟的各种流弊哄哄的博客。大多都是给你写个例子跑跑，看看console的顺序，然后搬两张大佬的图过来，再做一番推测。。。看完之后多多少少了解了点吧。更重的要，我在其中挖到了一些比这些博客更有价值的链接。


Philip Roberts（没有计算机学位的小哥，和我一样呢，优秀）在JSConf关于event loop的演讲：https://www.youtube.com/watch?v=8aGhZQkoFbQ ，如果想要快速、简单的熟悉event loop，先去看这个视频，绝对没错。大佬在视频中对执行栈、异步队列，不同模块的异步事件如何有序的进行异步调用做了可视化的演示。

Jake的博客：https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/ ，这位大佬是更加倾向于从规范的角度去解释这个问题，当然文中也有一些可视化的演示。

接下来谈谈我个人的理解：

首先，事件循环不是ECMAScript的规范，而是HTML的规范，没错，是HTML的规范，这一点估计就有很多人是理解错误的！（事件循环规范：https://html.spec.whatwg.org/#event-loops ）也就是说，这是使用HTML规范的客户端（一般是浏览器）需要实现的功能。


下面是结合两位大佬画的一个小学生水平的图示：要真正的去了解的话，估计还是得把那个规范读个好几遍，现在就先这样吧。
<img src="/images/2019-11-23_22-54-57.png">

理论就这样了，实践的话，私底下做做就可以了，主要还是写写常见的异步任务，定时器、promise啥的，然后根据所了解到的，先在脑子里跑一遍，再去浏览器验证，多搞几次估计就很熟练了。